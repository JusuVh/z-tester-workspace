<etc-page-header>
  <h1>Angular 21 Signal Forms Demo ğŸš€</h1>
</etc-page-header>
<etc-card>
  <etc-card-header-h2>
    <h2>Wowie-wow-wow</h2>
  </etc-card-header-h2>

  <div class="card-container">
    <form class="form">
      <fieldset>
        <legend>Point Details</legend>

        <etc-form-field>
          <etc-label>UUID</etc-label>
          <input etc-input [field]="pointForm.uuid" />
        </etc-form-field>

        <label>
          Site UUID:
          <input [field]="pointForm.siteUuid" />
          @if (pointForm.siteUuid().invalid() && pointForm.siteUuid().touched()) {
            <span class="error">Site UUID is required</span>
          }
        </label>

        <label>
          Zone UUID ('on blur')
          <input [field]="pointForm.zoneUuid" placeholder="Optional" />
          @if (pointForm.zoneUuid().invalid() && pointForm.zoneUuid().touched()) {
            @for (error of pointForm.zoneUuid().errors(); track error.kind) {
              <span class="error">{{ error.message }}</span>
            }
          }
        </label>

        <label>
          Postal Code (pattern)
          <input [field]="pointForm.postalCode" placeholder="Optional" />
          @if (pointForm.postalCode().invalid() && pointForm.postalCode().touched()) {
            @for (error of pointForm.postalCode().errors(); track error.kind) {
              <span class="error">{{ error.message }}</span>
            }
          }
        </label>
      </fieldset>

      <fieldset>
        <legend>General Information</legend>

        <label>
          Name:
          <input [field]="pointForm.generalInformation.name" />
          @if (pointForm.generalInformation.name().invalid() && pointForm.generalInformation.name().touched()) {
            @for (error of pointForm.generalInformation.name().errors(); track error.kind) {
              <span class="error">{{ error.message }}</span>
            }
          }
        </label>

        <label>
          Resource Type:
          <select [field]="pointForm.generalInformation.resource">
            <option value="">Select...</option>
            <option value="ELECTRICITY">Electricity âš¡</option>
            <option value="TEMP">Temperature ğŸŒ¡ï¸</option>
            <option value="GAS">Gas ğŸ”¥</option>
          </select>
          @if (pointForm.generalInformation.resource().invalid() && pointForm.generalInformation.resource().touched()) {
            <span class="error">Resource is required</span>
          }
        </label>

        <label>
          External Identifier:
          <input [field]="pointForm.generalInformation.externalIdentifier" placeholder="Optional" />
          @if (pointForm.generalInformation.externalIdentifier().invalid() && pointForm.generalInformation.externalIdentifier().touched()) {
            @for (error of pointForm.generalInformation.externalIdentifier().errors(); track error.kind) {
              <span class="error">{{ error.message }}</span>
            }
          }
        </label>

        <label>
          Reference Identifier:
          <input [field]="pointForm.generalInformation.referenceIdentifier" placeholder="Optional" />
        </label>

        <label>
          Quotation Identifier:
          <input [field]="pointForm.generalInformation.quotationIdentifier" placeholder="Optional" />
        </label>
      </fieldset>

      <div class="actions">
        <button type="button" (click)="fillSampleData()">Fill Sample Data</button>
        <button type="button" (click)="resetForm()">Reset</button>
        <button type="button" (click)="disableForm()" [disabled]="pointForm().disabled()">Disable Form</button>
        <button type="button" (click)="enableForm()" [disabled]="!pointForm().disabled()">Enable Form</button>
      </div>
    </form>

    <div class="signal-showcase">
      <h3>âœ¨ Signal Forms Magic âœ¨</h3>

      <div class="signal-card">
        <h4>ğŸ“Š Form State (Direct Signals!)</h4>
        <p><strong>Valid:</strong> {{ pointForm().valid() ? 'âœ…' : 'âŒ' }}</p>
        <p><strong>Invalid:</strong> {{ pointForm().invalid() ? 'âŒ' : 'âœ…' }}</p>
        <p><strong>Dirty:</strong> {{ pointForm().dirty() ? 'ğŸ“' : 'âœ¨' }}</p>
        <p><strong>Touched:</strong> {{ pointForm().touched() ? 'ğŸ‘†' : 'ğŸš«' }}</p>
        <p><strong>Disabled:</strong> {{ pointForm().disabled() ? 'ğŸ”’' : 'ğŸ”“' }}</p>
      </div>

      <div class="signal-card">
        <h4>ğŸ¯ Control Values (Signals)</h4>
        <p><strong>Name:</strong> {{ pointForm.generalInformation.name().value() || '(empty)' }}</p>
        <p><strong>Resource:</strong> {{ pointForm.generalInformation.resource().value() || '(not selected)' }}</p>
        <p><strong>Site UUID:</strong> {{ pointForm.siteUuid().value() || '(empty)' }}</p>
      </div>

      <div class="signal-card">
        <h4>ğŸ§® Computed Signal</h4>
        <p class="summary">{{ formSummary() }}</p>
      </div>

      <div class="signal-card">
        <h4>ğŸ” Validation Status</h4>
        <p><strong>Name valid:</strong> {{ pointForm.generalInformation.name().valid() ? 'âœ…' : 'âŒ' }}</p>
        <p><strong>Resource valid:</strong> {{ pointForm.generalInformation.resource().valid() ? 'âœ…' : 'âŒ' }}</p>
        <p><strong>Site UUID valid:</strong> {{ pointForm.siteUuid().valid() ? 'âœ…' : 'âŒ' }}</p>
      </div>

      <div class="signal-card">
        <h4>ğŸ“¦ Full Form Value (Signal)</h4>
        <pre>{{ pointForm().value() | json }}</pre>
      </div>

      <div class="signal-card">
        <h4>ğŸ”„ Initial Model (Signal)</h4>
        <pre>{{ initialPoint() | json }}</pre>
      </div>

      <div class="signal-card full-width">
        <h4>ğŸ¨ Resource Icon (Computed)</h4>
        <div class="resource-display">{{ resourceIcon() }}</div>
      </div>
    </div>
  </div>
</etc-card>
